# Obtain the dataset
```
pip install tensor2tensor
PROBLEM=translate_ende_wmt_bpe32k

MODEL=transformer
HPARAMS=transformer_base_single_gpu

DATA_DIR=$HOME/shr/t2t_data
TMP_DIR=$HOME/tmp/t2t_datagen
mkdir -p $DATA_DIR $TMP_DIR
t2t-datagen \
  --data_dir=$DATA_DIR \
  --tmp_dir=$TMP_DIR \
  --problem=$PROBLEM
```

# Process the dataset provided by tensor2tensor
1. Process the TFRecord File generated by tensor2tensot, to output the plain-text training file
```
python extract_data.py
```
2. Remove the `<PAD> <EOS> <UNK>` tokens in the vocab.bpe.32000
```
#enter the `~/t2t_data/' direcroty
cp vocab.bpe.32000 vocab.bpe.filtered
remove the 1st, 2nd, -1st line of `vocab.bpe.filtered' file
```

# training the model:

```
python transformer.py
```

# evaluation on test dataset newstest2014
```
#enter the `~/t2t_data/' directory
cp vocab.bpe.32000 vocab.bpe.eval
add <BOS> token in the second line of vocab.bpe.eval


enter `log_dir' directory and run the `evaluate_bleu.sh'
